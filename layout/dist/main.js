(()=>{"use strict";const e=e=>{document.querySelector(`${e.getAttribute("href")}`).scrollIntoView({behavior:"smooth",block:"start"})},t=e=>{e.style.visibility="hidden"},o=e=>{e.style.visibility="visible"},l=()=>{const e=document.querySelector(".popup-repair-types");let l=[],n=new Set;const r=e=>{document.querySelector("#switch-inner").textContent=e},s=()=>{(()=>{const e=document.querySelector(".nav-list-popup-repair");[...n].forEach(((t,o)=>{let n=document.createElement("button");n.classList.add("button_o","popup-repair-types-nav__item"),0===o&&(n.classList.add("active"),r(t)),n.textContent=t,e.append(n),((e,t)=>{const o=document.querySelector(".popup-repair-types-content-table");let n=document.createElement("table");n.classList.add("popup-repair-types-content-table__list");let r=document.createElement("tbody");l.forEach(((o,l)=>{if(e===o.type){let e=document.createElement("tr");e.classList.add("mobile-row"),0===t&&0===l&&e.classList.add("showHide"),e.innerHTML=`\n                        <td class="repair-types-name">${o.name}</td>\n                        <td class="mobile-col-title tablet-hide desktop-hide">Ед.измерения</td>\n                        <td class="mobile-col-title tablet-hide desktop-hide">Цена за ед.</td>\n                        <td class="repair-types-value">м<sup>2</sup></td>\n                        <td class="repair-types-value">${o.cost} руб.</td>\n                    `,r.append(e)}n.append(r)})),o.append(n)})(t,o)})),(()=>{const e=document.querySelector(".nav-list-popup-repair").children,t=document.querySelector(".popup-repair-types-content-table").children,o=o=>{[...t].forEach(((t,l)=>{o===l?(e[l].classList.add("active"),t.style.display=""):(e[l].classList.remove("active"),t.style.display="none")}))};document.body.addEventListener("click",(t=>{let l=t.target;l.matches(".popup-repair-types-nav__item")&&[...e].forEach(((e,t)=>{l===e&&(o(t),r(e.textContent))}))})),o(0)})(),window.innerWidth<=1024&&(()=>{const e=document.querySelector("#nav-arrow-popup-repair_left"),t=document.querySelector("#nav-arrow-popup-repair_right"),o=document.querySelectorAll(".popup-repair-types-nav__item");let l=0;o.forEach(((e,t)=>{t!==l&&(e.style.display="none")}));const n=(e,t)=>{e[t].style.display="none"},r=(e,t)=>{e[t].style.display=""};e.addEventListener("click",(()=>{n(o,l),l--,l<0&&(l=o.length-1),r(o,l)})),t.addEventListener("click",(()=>{n(o,l),l++,l>=o.length&&(l=0),r(o,l)}))})()})()};document.body.addEventListener("click",(r=>{let c=r.target;var i;"a"===c.tagName.toLowerCase()&&"Полный список услуг и цен"===c.textContent.trim()&&(i=s,fetch("../../crm-backend/db.json").then((e=>{if(200!==e.status)throw new Error("status network not 200");return e.json()})).then((e=>{l=e,e.forEach((e=>{n.add(e.type)})),i()})).catch((e=>console.log(e))),o(e)),"visible"===e.style.visibility&&(c.matches(".popup-repair-types")||c.matches(".close")&&c.closest(".popup-repair-types"))&&(t(e),document.querySelector(".nav-list-popup-repair").textContent="",document.querySelector(".popup-repair-types-content-table").textContent="")}))},n=()=>{const e=document.querySelector(".slider-counter-content__current"),t=document.querySelector(".slider-counter-content__total");let o=0;e.textContent=1,(()=>{const t=document.querySelectorAll(".repair-types-nav__item"),l=document.querySelectorAll(".types-repair");document.body.addEventListener("click",(n=>{let r=n.target;r.matches(".repair-types-nav__item")&&(e.textContent=1,o=0,t.forEach(((e,o)=>{r===e&&(e=>{l.forEach(((o,l)=>{e===l?(t[l].classList.add("active"),o.style.display=""):(t[l].classList.remove("active"),o.style.display="none")}))})(o)})))}))})(),(()=>{const l=document.querySelector("#repair-types-arrow_left"),n=document.querySelector("#repair-types-arrow_right"),r=document.querySelectorAll(".types-repair");t.textContent=r.length,e.textContent=1,r.forEach(((e,t)=>{t!==o&&(e.style.display="none")}));const s=(t,l)=>{t[l].style.display="none",e.textContent=o+1},c=(t,l)=>{t[l].style.display="",e.textContent=o+1};l.addEventListener("click",(()=>{s(r,o),o--,o<0&&(o=r.length-1),c(r,o)})),n.addEventListener("click",(()=>{s(r,o),o++,o>=r.length&&(o=0),c(r,o)}))})(),window.innerWidth<=1024&&(()=>{const e=document.querySelector("#nav-arrow-repair-left_base"),t=document.querySelector("#nav-arrow-repair-right_base"),o=document.querySelector(".repair-types-nav"),l=document.querySelectorAll(".repair-types-nav__item"),n=document.querySelector(".nav-list-repair");let r=0,s=+getComputedStyle(n).width.slice(0,-2)-+getComputedStyle(o).width.slice(0,-2),c=s/l.length;const i=()=>{Math.abs(r)===s?e.style.display="none":0===r?t.style.display="none":(e.style.display="",t.style.display="")};i(),e.addEventListener("click",(()=>{Math.abs(r)<s&&(r-=c,Math.abs(r)>s&&(r=-1*s),n.style.transform=`translateX(${r}px)`,i())})),t.addEventListener("click",(()=>{r<0&&(r+=c,r>0&&(r=0),n.style.transform=`translateX(${r}px)`,i())}))})()},r=()=>{window.innerWidth>575?(()=>{const e=document.querySelector("#portfolio-arrow_left"),t=document.querySelector("#portfolio-arrow_right"),o=document.querySelector(".portfolio-slider"),l=o.querySelectorAll(".portfolio-slider__slide-frame");l.forEach((e=>e.style.transition="all 0.7s ease 0s"));let n=0,r=+getComputedStyle(l[0]).width.slice(0,-2)*l.length/2-+getComputedStyle(o).width.slice(0,-2),s=r/l.length;window.innerWidth<900&&(s=r/l.length/2);const c=()=>{Math.abs(n)===r?t.style.display="none":0===n?e.style.display="none":(t.style.display="",e.style.display="")};c(),t.addEventListener("click",(()=>{Math.abs(n)<r&&(n-=s,Math.abs(n)>r&&(n=-1*r),[...l].every((e=>e.style.transform=`translateX(${n}px)`)),c())})),e.addEventListener("click",(()=>{n<0&&(n+=s,n>0&&(n=0),[...l].every((e=>e.style.transform=`translateX(${n}px)`)),c())}))})():(()=>{const e=document.querySelector("#portfolio-arrow-mobile_left"),t=document.querySelector("#portfolio-arrow-mobile_right"),o=document.querySelector(".portfolio-slider-mobile").querySelectorAll(".portfolio-slider__slide-frame"),l=document.querySelector("#portfolio-counter");let n=l.querySelector(".slider-counter-content__total"),r=l.querySelector(".slider-counter-content__current"),s=0;n.textContent=o.length,r.textContent=s+1;const c=()=>{s===o.length-1?t.style.display="none":0===s?e.style.display="none":(t.style.display="",e.style.display="")};c(),o.forEach(((e,t)=>{t!==s&&(e.style.display="none")}));const i=(e,t)=>{e[t].style.display="none"},a=(e,t)=>{e[t].style.display=""};e.addEventListener("click",(()=>{i(o,s),s--,r.textContent=s+1,a(o,s),c()})),t.addEventListener("click",(()=>{i(o,s),s++,r.textContent=s+1,a(o,s),c()}))})()},s=e=>{e.querySelectorAll("input").forEach((e=>{e.value=""})),e.querySelector('input[type="checkbox"]')&&e.querySelectorAll('input[type="checkbox"]').forEach((e=>e.checked=!1))},c=()=>{const e=document.querySelector("#transparency-arrow_left"),t=document.querySelector("#transparency-arrow_right"),o=document.querySelectorAll(".transparency-item");if(window.innerWidth<=1090){let l=0;o.forEach(((e,t)=>{t!==l&&(e.style.display="none")}));const n=(e,t)=>{e[t].style.display="none"},r=(e,t)=>{e[t].style.display=""};e.addEventListener("click",(()=>{n(o,l),l--,l<0&&(l=o.length-1),r(o,l)})),t.addEventListener("click",(()=>{n(o,l),l++,l>=o.length&&(l=0),r(o,l)}))}else o.forEach((e=>{e.style.display=""}))};(()=>{const e=document.querySelector("#formula-arrow_left"),t=document.querySelector("#formula-arrow_right"),o=document.querySelectorAll(".formula-slider__slide");let l=0;o.forEach(((e,t)=>{t!==l&&(e.style.display="none")}));const n=(e,t)=>{e[t].style.display="none",e[t].style.opacity=""},r=(e,t)=>{e[t].style.display="",e[t].style.opacity="1"};e.addEventListener("click",(()=>{n(o,l),l--,l<0&&(l=o.length-1),r(o,l)})),t.addEventListener("click",(()=>{n(o,l),l++,l>=o.length&&(l=0),r(o,l)}))})(),(()=>{const e=document.querySelectorAll(".wrapper_small");let t,o;const l=e=>{let t={top:window.pageYOffset+e.getBoundingClientRect().top,left:window.pageXOffset+e.getBoundingClientRect().left,right:window.pageXOffset+e.getBoundingClientRect().right,bottom:window.pageYOffset+e.getBoundingClientRect().bottom},o={top:window.pageYOffset,left:window.pageXOffset,right:window.pageXOffset+document.documentElement.clientWidth,bottom:window.pageYOffset+document.documentElement.clientHeight};console.log(t.top,o.top),t.top<o.top?(e.style.transform="rotate(180deg)",e.style.top="80px"):(e.style.transform="",e.style.top="")};document.querySelector("#formula").addEventListener("mouseover",(n=>{let r=n.target;r.closest(".formula-item__icon")&&(r=r.parentElement,t=e[0].querySelectorAll(".formula-item__icon"),o=e[0].querySelectorAll(".formula-item-popup"),t.forEach(((e,t)=>{e===r&&(l(o[t]),o[t].style.visibility="visible",o[t].style.opacity="1")})))})),document.querySelector("#formula").addEventListener("mouseout",(n=>{let r=n.target;r.closest(".formula-item__icon")&&(r=r.parentElement,t=e[0].querySelectorAll(".formula-item__icon"),o=e[0].querySelectorAll(".formula-item-popup"),t.forEach(((e,t)=>{e===r&&(l(o[t]),o[t].style.visibility="",o[t].style.opacity="")})))}))})(),(()=>{const e=document.querySelector(".popup-portfolio"),l=document.querySelector(".portfolio-slider"),n=document.querySelector(".portfolio-slider-mobile"),r=document.querySelector("#popup-portfolio-counter"),s=r.querySelector(".slider-counter-content__current"),c=r.querySelector(".slider-counter-content__total");let i;i=window.innerWidth>575?l.querySelectorAll(".portfolio-slider__slide-frame"):n.querySelectorAll(".portfolio-slider__slide-frame");const a=document.querySelectorAll(".popup-portfolio-text"),d=document.querySelectorAll(".popup-portfolio-slider__slide"),p=e=>{d.forEach(((t,o)=>{o===e?(s.textContent=e+1,t.style.display="",a.forEach(((t,o)=>{t.style.display=e===o?"block":"none"}))):t.style.display="none"}))};i.forEach(((t,l)=>{t.addEventListener("click",(t=>{var n;t.target.matches(".portfolio-slider__slide-frame")&&(o(e),n=l,c.textContent=i.length,p(n),(e=>{const t=document.querySelector("#popup_portfolio_left"),o=document.querySelector("#popup_portfolio_right");let l=e;const n=()=>{0===l?t.style.display="none":l===d.length-1?o.style.display="none":(t.style.display="",o.style.display="")};n(),t.addEventListener("click",(()=>{t.style.display="",l--,n(),s.textContent=l+1,p(l)})),o.addEventListener("click",(()=>{o.style.display="",l++,n(),s.textContent=l+1,p(l)}))})(n))}))})),document.addEventListener("click",(o=>{let l=o.target;"visible"===e.style.visibility&&(l.matches(".popup-portfolio")||l.matches(".close")&&l.closest(".popup-portfolio"))&&t(e)}))})(),r(),(()=>{const e=document.querySelector(".header-contacts__arrow"),t=document.querySelector(".header-contacts__phone-number-accord"),o=t.querySelector(".header-contacts__phone-number");e.addEventListener("click",(()=>{e.classList.toggle("active"),o.classList.toggle("active"),t.classList.toggle("active")}))})(),(()=>{const e=document.createElement("section"),l=document.createElement("section");e.insertAdjacentHTML("beforeend",'\n        <div class="preloader-wrapper">\n            <span class="preloader"></span>\n        </div>       \n    '),l.insertAdjacentHTML("beforeend",'\n        <div class="error-wrapper">\n            <div class="close">\n                <svg width="22" height="22" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22">\n                    <path fill-rule="evenodd" clip-rule="evenodd"\n                    d="M21.673.327a1.118 1.118 0 0 0-1.581 0L11 9.42 1.909.327A1.118 1.118 0 0 0 .327 1.91L9.42 11 .327 20.091a1.118 1.118 0 1 0 1.582 1.581L11 12.582l9.091 9.09a1.118 1.118 0 1 0 1.581-1.58L12.582 11l9.09-9.091a1.118 1.118 0 0 0 0-1.582z"\n                    fill="rgba(255, 255, 255)" fill-opacity=".5"></path>\n                </svg>\n            </div>\n            <span class="error-message">Упс...Что-то пошло не так</span>\n        </div>   \n    ');let n=document.createElement("div");n.classList.add("popup","popup-loader"),document.querySelectorAll("form").forEach((r=>{r.addEventListener("submit",(c=>{c.preventDefault();let i=r.querySelector("button"),a=r.querySelectorAll("input"),d=r.querySelector('input[type="checkbox"]');const p=new FormData(r);let u={};p.forEach(((e,t)=>{u[t]=e})),a.forEach((e=>{e.addEventListener("change",(()=>i.disabled=!1))})),d.addEventListener("change",(()=>d.nextElementSibling.style.border="")),(e=>{for(let t in e)return!!e[t];return!1})(u)?d.checked?(n.textContent="",n.append(e),document.body.append(n),o(n),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(u).then((e=>{if(200!==e.status)throw new Error("status network not 200");t(n),(()=>{const e=document.querySelector(".popup-thank");o(e),document.body.addEventListener("click",(o=>{let l=o.target;"visible"===e.style.visibility&&(l.matches(".popup-thank")||l.matches(".close")&&l.closest(".popup-thank"))&&t(e)}))})(),s(r),"visible"===document.querySelector(".popup-consultation").style.visibility&&t(document.querySelector(".popup-consultation"))})).catch((e=>{n.textContent="",n.append(l),(()=>{const e=document.querySelector(".popup-loader");document.body.addEventListener("click",(o=>{let l=o.target;"visible"===e.style.visibility&&(l.matches(".popup-loader")||l.matches(".close")&&l.closest(".popup-loader"))&&t(e)}))})(),s(r),console.log(e)}))):(i.disabled=!0,d.nextElementSibling.style.border="1px solid #ff0000"):i.disabled=!0}))}))})(),(()=>{const e=document.querySelector(".accordion");e.querySelectorAll(".msg-active").forEach((e=>e.classList.remove("msg-active"))),e.addEventListener("click",(e=>{let t=e.target;t.matches(".title_block")&&t.classList.toggle("msg-active")}))})(),(()=>{const e=document.querySelector("#reviews-arrow_left"),t=document.querySelector("#reviews-arrow_right"),o=document.querySelectorAll(".reviews-slider__slide");let l=0;o.forEach(((e,t)=>{t!==l&&(e.style.display="none")}));const n=(e,t)=>{e[t].style.display="none"},r=(e,t)=>{e[t].style.display=""};e.addEventListener("click",(()=>{n(o,l),l--,l<0&&(l=o.length-1),r(o,l)})),t.addEventListener("click",(()=>{n(o,l),l++,l>=o.length&&(l=0),r(o,l)}))})(),document.querySelectorAll("input[required]").forEach((e=>e.removeAttribute("required"))),(()=>{const e=document.querySelectorAll('input[name="phone"]');new class{constructor({selector:e,masked:t="+7 (___) ___-__-__"}){this.elems=document.querySelectorAll(e),this.masked=t}mask(e,t){const o=e.keyCode,l=this.masked,n=l.replace(/\D/g,""),r=t.value.replace(/\D/g,"");let s=0,c=l.replace(/[_\d]/g,(e=>s<r.length?r.charAt(s++)||n.charAt(s):e));s=c.indexOf("_"),-1!=s&&(c=c.slice(0,s));let i=l.substr(0,t.value.length).replace(/_+/g,(e=>"\\d{1,"+e.length+"}")).replace(/[+()]/g,"\\$&");i=new RegExp("^"+i+"$"),(!i.test(t.value)||t.value.length<5||o>47&&o<58)&&(t.value=c),"blur"==e.type&&t.value.length<5&&(t.value="")}start(){for(const e of this.elems)e.addEventListener("input",(()=>this.mask("input",e))),e.addEventListener("focus",(()=>this.mask("focus",e))),e.addEventListener("blur",(()=>this.mask("blur",e)))}}({selector:'input[name="phone"]',masked:"+7 (___)___-__-__"}).start(),e.forEach((e=>{e.addEventListener("blur",(t=>{t.target===e&&(e.value=e.value.replace(/[^0-9\(\)\+\- ]/,""),/^\+7\ \(\d{3}\)\d{3}\-\d{2}\-\d{2}$/.test(e.value)||(e.value=e.value.replace(e.value,"")))}))}))})(),document.querySelectorAll('input[name="name"]').forEach((e=>{e.addEventListener("focus",(()=>e.style.border="")),e.addEventListener("input",(()=>((e,t)=>{let o=/[^а-яё]/i;o.test(e)&&(e.value=e.value.replace(o,""))})(e))),e.addEventListener("blur",(t=>{t.target===e&&(e.value=e.value.replace(/[^а-яё]+/i,""),e.value?e.value=`${e.value.slice(0,1).toUpperCase()}${e.value.slice(1).toLowerCase()}`:e.value=e.value.replace(e.value,""))}))})),n(),(()=>{const e=document.querySelector(".popup-consultation");document.body.addEventListener("click",(l=>{let n=l.target;n.matches(".button_wide")&&o(e),"visible"===e.style.visibility&&(n.matches(".popup-consultation")||n.matches(".close")&&n.closest(".popup-consultation"))&&t(e)}))})(),c(),(()=>{const e=document.querySelector(".popup-transparency");document.querySelectorAll(".transparency-item__img").forEach(((t,l)=>{t.addEventListener("click",(t=>{t.target.matches(".transparency-item__img")&&(o(e),(e=>{const t=document.querySelector("#transparency_left"),o=document.querySelector("#transparency_right"),l=document.querySelectorAll(".popup-transparency-slider__slide");document.querySelector(".slider-counter-content__current"),document.querySelector(".slider-counter-content__total"),l.forEach((e=>{e.style.display=""}));let n=e;l.forEach(((e,t)=>{t!==n&&(e.style.display="none")}));const r=(e,t)=>{e[t].style.display="none"},s=(e,t)=>{e[t].style.display=""};t.addEventListener("click",(()=>{r(l,n),n--,n<0&&(n=l.length-1),s(l,n)})),o.addEventListener("click",(()=>{r(l,n),n++,n>=l.length&&(n=0),s(l,n)}))})(l))}))})),document.addEventListener("click",(o=>{let l=o.target;"visible"===e.style.visibility&&(l.matches(".popup-transparency")||l.matches(".close")&&l.closest(".popup-transparency"))&&t(e)}))})(),(()=>{const e=document.querySelector(".popup-privacy");document.body.addEventListener("click",(l=>{let n=l.target;!n.matches(".link-privacy")||"политикой конфиденциальности"!==n.textContent.trim()&&"Политика конфиденциальности"!==n.textContent.trim()||o(e),"visible"===e.style.visibility&&(n.matches(".popup-privacy")||n.matches(".close")&&n.closest(".popup-privacy"))&&t(e)}))})(),l(),(()=>{const t=document.querySelector(".popup-menu"),o=()=>{t.style.visibility="",document.head.querySelector(".openMenuStyles").remove()};document.body.addEventListener("click",(l=>{let n=l.target;n.matches(".menu__icon")&&(()=>{t.style.visibility="visible";let e=document.createElement("style");e.classList.add("openMenuStyles"),e.textContent="\n            .popup-dialog-menu {\n                    -webkit-transform: translate3d(0, 0, 0);\n                    transform: translate3d(0, 0, 0);\n                }",document.head.append(e)})(),"visible"===t.style.visibility&&(n.matches(".close-menu")?o():n.matches(".menu-link")?n.closest(".popup-menu-nav__item")?(l.preventDefault(),e(n),o()):n.closest(".link-list-menu")&&(l.preventDefault(),o()):n.matches(".menu__icon")||o())}))})(),(()=>{const t=document.querySelector(".button-footer");t.addEventListener("click",(o=>{o.preventDefault(),e(t.querySelector("a"))}))})(),window.addEventListener("resize",(()=>{c(),n(),l(),r()}))})();